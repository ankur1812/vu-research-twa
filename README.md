# vu-research-twa
Project repository for TWA Research

## Mining Top Play Store Apps
`apps_miner/app_miner.js` contains the code for mining top play store apps from the Kaggle's dataset and then generate the corresponsing androzoo data for these apps.

##### Setup Requirements
- Local MongoDB Server running on port 27017 
- "vu_apps" database containing below collections
    - "googleplaystore": <a href="https://www.kaggle.com/datasets/gauthamp10/google-playstore-apps">Kaggle's  Google Play Store Apps data set </a>
    - "apps_collection": <a href="https://androzoo.uni.lu/">Androzoo APK dataset</a>

##### Execution
Run the start script to start mining. Results would be saved in `apps_miner/output` folder.
```
cd apps_miner
npm install
sh start.sh
```

## TWA Detection
The twa_detector uses the CSVs generated by app_miner.js to download APKs, decompile them using Apktool, then detect TWA tags inside the Android Manifest of the decompiled apps. The CSVs are already generated and saved in AppsList folder.
##### Requirement
- <a href="https://ibotpeaches.github.io/Apktool/">Apktool </a> Must be installed
Run the twa_detector/detector.js to get the TWA Apps. Results will be saved in twa_detector/TWAs.csv
##### Execution
```
cd twa_detector
npm i 
node detector.js
```
### URL Analysis
The target URLs for the TWAs apps will be fetchted from the manifest. TO analyze the URLs, their HTML code needs to be first saved to `website_analyzer/websites` folder, then the `extract_links.js` and `download_links_analyze.js` codes will extract the JS/CSS/Media links and then download them. Sample websites `mockwebsite1.com` && `mockwebsite2.com` code is saved in the websites folder for reference.

###### Requirement
HTML codes for the target URLs have to be saved in `website_analyzer/websites/` folder
##### Execution
```
cd website_analyzer
sh start.sh
```
THe results.json file will be generated which will include all the site information.

### Visualization
visualizer/vizchart.py contains the code for all the visualizations. 
##### Requirements: 
- Python + Matplotlib

The vizchart.py can either use the 'thesis-data' or the latest data in website_analyzer/results.json and plot the js/ html / css/ media plots.

##### Execution
```
cd visualizer
python3 vizchart.py <data> <plotname>
```

\<data> values are: [ "thesis-data", "latest"]
\<plotname> values can be: 
["js", "js-loc", "js-percent", "css", "css-percent", "css-animations", "html", "forms", "ajax", "media", "href"]

Example
```
python3 vizchart.py thesis-data js
python3 vizchart.py latest css-percent
```
